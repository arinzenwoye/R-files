define(["require","exports","modules/clean/sticker_util","jquery","external/react","external/classnames"],function(t,e,i,s,o,n){"use strict";var a="webkitAnimationIteration mozAnimationIteration MSAnimationIteration OAnimationIteration animationiteration",r="webkitAnimationEnd mozAnimationEnd MSAnimationEnd OAnimationEnd animationend";return o.createClass({displayName:"LiveSticker",mixins:[o.addons.PureRenderMixin],propTypes:{stickerId:o.PropTypes.number.isRequired,size:o.PropTypes.oneOf(["small","normal"]),skipInitial:o.PropTypes.bool},getInitialState:function(){return{previewReady:!1,staticReady:!1,spritesReady:!1,mouseOver:!1,initial:!1,intro:!1,loop:!1,outro:!1}},componentDidMount:function(){var t=s(this.refs.sticker.getDOMNode());t.on(a,this.onAnimationIteration),t.on(r,this.onAnimationEnd),t.on("mouseenter touchstart",this.onMouseEnter),t.on("mouseleave touchend",this.onMouseLeave)},componentWillUnmount:function(){var t=s(this.refs.sticker.getDOMNode());t.off(a,this.onAnimationIteration),t.off(r,this.onAnimationEnd),t.off("mouseenter touchstart",this.onMouseEnter),t.off("mouseleave touchend",this.onMouseLeave)},onPreviewLoad:function(){this.setState({previewReady:!0,initial:!this.props.skipInitial&&this.state.spritesReady})},onStaticLoad:function(){this.setState({staticReady:!0})},onSpritesLoad:function(){this.setState({spritesReady:!0,initial:!this.props.skipInitial&&this.state.previewReady})},onAnimationIteration:function(){this.setState({initial:this.state.initial&&!this.state.mouseOver,intro:this.state.loop&&!this.state.mouseOver,loop:this.state.mouseOver,outro:!1})},onAnimationEnd:function(){this.setState({initial:!1,intro:this.state.outro&&!this.state.mouseOver,loop:this.state.mouseOver,outro:!1})},onMouseEnter:function(){this.state.mouseOver||this.setState({mouseOver:!0,outro:!(this.state.loop||this.state.intro||this.state.initial)})},onMouseLeave:function(){this.state.mouseOver&&this.setState({mouseOver:!1})},render:function(){var t=this.props,e=t.stickerId,s=t.size,a=this.state,r=a.previewReady,l=a.spritesReady,c=a.initial,m=a.intro,u=a.loop,p=a.outro,d="live-sticker-"+e,v=n((k={"live-sticker":!0,"live-sticker-ready":r&&l,"live-sticker-initial":c,"live-sticker-intro":m,"live-sticker-loop":u,"live-sticker-outro":p,"live-sticker-size-small":"small"==s},k["live-sticker-"+e]=!0,k));if(!r||!l)var h=o.createElement("img",{className:"live-sticker-preview",onLoad:this.onPreviewLoad,src:i.getStickerImageUrl(e,"preview"),alt:d});return o.createElement("span",{ref:"sticker",className:v,"data-sticker-id":e},o.createElement("img",{className:"live-sticker-sprites",onLoad:this.onSpritesLoad,src:i.getStickerImageUrl(e,"sprites"),alt:""}),o.createElement("span",{className:"live-sticker-sprites-overlay"}),o.createElement("img",{className:"live-sticker-static",onLoad:this.onStaticLoad,src:i.getStickerImageUrl(e,"png"),srcSet:i.getStickerImageUrl(e,"png@2x")+" 2x",alt:d}),h);var k}})});
//# sourceMappingURL=live_sticker.min.js-vfl7iQnXj.map